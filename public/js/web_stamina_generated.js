/* This file is automatically generated by Waw. Any edit will probably be lost
 * next time the application is started. */

/* Messages, from waw.resources.messages */
var messages = new Array();
messages['bad_email'] = "Invalid e-mail address";
messages['bad_user_or_password'] = "Unknown user or bad password";
messages['missing_message'] = "The message is mandatory";

/* Actions contributed by WebStamina::Controllers::PeopleController, mapped to / */
function webserv_people_contact(request_data, form) {
  $.ajax({type: "POST", url: "/webserv/people/contact", data: request_data, dataType: "json",
    error: function(data) {
      window.location = '/feedback?mkey=server_error';
    },
    success: function(data) {
      if (data[0] == 'validation-ko') {
        str = '';
        str += '<ul>';
        for (var k in data[1]) {
          str += '<li>' + messages[data[1][k]] + '</li>';
        }
        str += '</ul>';
        $(form + ' .feedback').show();
        $(form + ' .feedback').html(str);
      
      } else if (data[0] == 'success') {
        if (data[1] == 'ok') {
          location.reload(true);
        }
      }
    }
  });
  return false;
}  
function webserv_people_login(request_data, form) {
  $.ajax({type: "POST", url: "/webserv/people/login", data: request_data, dataType: "json",
    error: function(data) {
      window.location = '/feedback?mkey=server_error';
    },
    success: function(data) {
      if (data[0] == 'validation-ko') {
        $(form + ' .feedback').show();
        $(form + ' .feedback').html(messages[data[1][0]]);
      } else if (data[0] == 'success') {
        if (data[1] == 'ok') {
          location.reload(true);
        }
      }
    }
  });
  return false;
}  
function webserv_people_subscribe(request_data, form) {
  $.ajax({type: "POST", url: "/webserv/people/subscribe", data: request_data, dataType: "json",
    error: function(data) {
      window.location = '/feedback?mkey=server_error';
    },
    success: function(data) {
      
    }
  });
  return false;
}  
